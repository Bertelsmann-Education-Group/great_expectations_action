 ![](https://github.com/superconductive/great_expectations_action/workflows/GE-Action-Build/badge.svg) [![Netlify Status](https://api.netlify.com/api/v1/badges/658dedee-2ee7-44b2-b926-d6146a173e11/deploy-status)](https://app.netlify.com/sites/great-expectations/deploys)
 
 <h1><img src="https://github.com/superconductive/great_expectations_action/blob/master/ge-logo.png" width="100" height="100">Great Expectations GitHub Action</h1>

# Table of Contents

TODO: Add TOC

# Background

This Action allows you to validate your data with [Great Expectations](https://greatexpectations.io/).  From [the docs](https://docs.greatexpectations.io/en/latest/):

> Great Expectations is a leading tool for validating, documenting, and profiling your data to maintain quality and improve communication between teams.

This Action provides the following features:

- Run Great Expectations checkpoints as part of your continous integration process, along side your unit tets, etc.
- Generate data docs and user interfaces that allow you to troubleshoot failed checkpoints or investigate data.
- Optionally comment on a pull request with a link to your deployed data docs on [Netlify](https://www.netlify.com/).
- Deploy data docs from checkpoints to GitHub pages.

# Demo

TODO: insert GIF here

# Usage

## Example 1 TODO

```yaml
TODO
```

## Example 2 TODO

```yaml
TODO
```

# API Reference

## Inputs

### Mandatory Inputs

- `CHECKPOINTS`:
    A comma separated list of checkpoint names to execute.  Example -  "checkpoint1,checkpoint2"

### Optional Inputs

- `NETLIFY_AUTH_TOKEN`:
    A personal access token for [Netlify](https://www.netlify.com/).

- `NETLIFY_SITE_ID`:
    A [Netlify](https://www.netlify.com/) site id.

## Outputs

- `ACTION_DOCS_LOCATION`:
    The absolute path where generated data docs generated by the Action run are located.  This is useful if you want to deploy the data docs to an external service.

- `FAILING_CHECKPOINTS`:
    description: A comma delimited list of failed checkpoints.

- `PASSING_CHECKPOINTS`:
    description: A comma delimited list of passing checkpoints.

- `NETLIFY_DOCS_URL`:
    description: The url to the generated data docs on Netlify.  This output is only emitted only if the input parameters NETLIFY_AUTH_TOKEN and NETLIFY_SITE_ID are provided.

# Development

This section is for those who wish to develop this GitHub Action.  Users of this Action can ignore this section.

## Installation

1. `pip install -r requriements.txt`
2. run `great_expectations init` to set up missing directories

## Use

Run these commands from the repo root.

To see a checkpoint pass run `great_expectations checkpoint run passing_checkpoint`
To see a checkpoint fail run `great_expectations checkpoint run failing_checkpoint`

## MVP Action Limitations

- If a **cloud-based** `ValidationStore` is in use we may need to disable it so that the built docs focus only on what is being validated in the Action without other side effects.
