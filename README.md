![](https://github.com/superconductive/great_expectations_action/workflows/Action%20Build/badge.svg) ![](https://github.com/superconductive/great_expectations_action/workflows/PR%20Comment/badge.svg) ![](https://github.com/superconductive/great_expectations_action/workflows/PR%20Push/badge.svg) [![MLOps](https://img.shields.io/badge/MLOps-black.svg?logo=github&?logoColor=blue)](https://mlops-github.com)


 <h1><img src="https://github.com/superconductive/great_expectations_action/blob/master/ge-logo.png" width="100" height="100">Great Expectations GitHub Action</h1>

# Table of Contents

TODO: Add TOC

# Background

This Action allows you to validate your data with [Great Expectations](https://greatexpectations.io/).  From [the docs](https://docs.greatexpectations.io/en/latest/):

> Great Expectations is a leading tool for validating, documenting, and profiling your data to maintain quality and improve communication between teams.

This Action provides the following features:

- Run Great Expectations checkpoints as part of your continuous integration process, along side your unit tests, etc.
- Generate Data Docs and user interfaces that allow you to troubleshoot failed checkpoints or investigate data.
- Built-in support to deploy Docs to [Netlify](https://www.netlify.com/), which is useful to preview changes in pull requests.
- Composability with other Actions that allow you to deploy Data Docs to any location, or customize your workflows.

# Demo

TODO: insert GIF here

# Usage

## Example 1 TODO

```yaml
TODO
```

## Example 2 TODO

```yaml
TODO
```

# API Reference

## Inputs

### Mandatory Inputs

- `CHECKPOINTS`:
    A comma separated list of checkpoint names to execute.  Example -  "checkpoint1,checkpoint2"

### Optional Inputs

- `NETLIFY_AUTH_TOKEN`:
    A personal access token for [Netlify](https://www.netlify.com/).

- `NETLIFY_SITE_ID`:
    A [Netlify](https://www.netlify.com/) site id.

- `DEBUG`
    Setting this input to any value will allow the Action to exit with a status code of 0 even if a checkpoint fails.  This is used by maintainers of this Action for testing and debugging.

## Outputs

- `ACTION_DOCS_LOCATION`:
    The absolute path where generated data docs generated by the Action run are located.  This is useful if you want to deploy the data docs to an external service.

- `FAILING_CHECKPOINTS`:
    A comma delimited list of failed checkpoints.

- `PASSING_CHECKPOINTS`:
    A comma delimited list of passing checkpoints.

- `NETLIFY_DOCS_URL`:
    The url to the generated data docs on Netlify.  This output is only emitted only if the input parameters NETLIFY_AUTH_TOKEN and NETLIFY_SITE_ID are provided.

- `CHECKPOINT_FAILURE_FLAG`:
    This will return 0 if there are no checkpoint failures and 1 if there are one or more checkpoint failures.

# Development

This section is for those who wish to develop this GitHub Action.  Users of this Action can ignore this section.

## Installation

1. `pip install -r requriements.txt`
2. run `great_expectations init` to set up missing directories

## Usage

Run these commands from the repo root.

To see a checkpoint pass run `great_expectations checkpoint run passing_checkpoint`
To see a checkpoint fail run `great_expectations checkpoint run failing_checkpoint`

## Current Limitations

- If a **cloud-based** `ValidationStore` is in use we may need to disable it so that the built docs focus only on what is being validated in the Action without other side effects.
