name: GE-Action-Build
on:
  push:
    branches:
      - master
  pull_request: 

jobs:     
  test-local-action:
    runs-on: ubuntu-latest
    steps:

    - name: Copy Repository Contents
      uses: actions/checkout@master

    - name: execute local action
      continue-on-error: true
      uses: ./
      with:
        CHECKPOINTS: "passing_checkpoint,failing_checkpoint"
      

  test-hosted-action:
    runs-on: ubuntu-latest
    steps:

    - name: Copy Repository Contents
      uses: actions/checkout@master

    - name: execute local action
      continue-on-error: true
      uses: superconductive/great_expectations_action@master
      with:
        CHECKPOINTS: "passing_checkpoint,failing_checkpoint"
          


        # name: CI
        # on:
        #   push:
        #     branches:
        #       - master
        #   pull_request: 
        
        # jobs:     
        #   build-site:
        #     if: ( github.event.commits[0].message != 'Initial commit' ) || github.run_number > 1
        #     runs-on: ubuntu-latest
        #     steps:
        
        #     - name: see payload
        #       run: echo "$PAYLOAD"
        #       env:
        #         PAYLOAD: ${{ toJSON(github.event) }}
        
        #     - name: Copy Repository Contents
        #       uses: actions/checkout@master
        #       with:
        #         persist-credentials: false
        
        #     - name: execute local action
        #       uses: ./_action_files
        
        #     - name: execute a github script
        #       uses: actions/github-script@0.9.0
        #       with:
        #         github-token: ${{secrets.GITHUB_TOKEN}}
        #         script: |
        #             username = process.env.USER;
        #             github.issues.createComment({
        #             issue_number: context.issue.number,
        #             owner: context.repo.owner,
        #             repo: context.repo.repo,
        #             body: `@${username} Thanks for reporting!`
        #             })
        #       env: 
        #        USER: ${{ github.actor }}
